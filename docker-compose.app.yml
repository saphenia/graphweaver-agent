services:
  streamlit:
    build: .
    container_name: graphweaver-streamlit
    ports:
      - "8501:8501"
    environment:
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY}
      DEBUG: ${DEBUG:-1}
      POSTGRES_HOST: 10.128.0.5
      POSTGRES_PORT: 5432
      POSTGRES_DB: orders
      POSTGRES_USER: saphenia
      POSTGRES_PASSWORD: secret
      NEO4J_URI: bolt://10.128.0.5:7687
      NEO4J_USER: neo4j
      NEO4J_PASSWORD: password
      MARQUEZ_URL: http://10.128.0.5:5000
      FUSEKI_URL: http://10.128.0.5:3030
      FUSEKI_DATASET: graphweaver
      TRANSFORMERS_CACHE: /app/.cache/huggingface
      HF_HOME: /app/.cache/huggingface
    command: ["streamlit", "run", "streamlit_app.py", "--server.address", "0.0.0.0", "--server.port", "8501"]
    restart: unless-stopped
